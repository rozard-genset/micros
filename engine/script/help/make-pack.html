
<!-- styles -->
{{- $style_data := slice  -}}
{{- $style_dest := .Store.Get "dest_css" -}}

{{- range ( sort ( .Store.Get "pack_css" ) | uniq ) -}}
    {{- with resources.Get . -}}
        {{- $style_data = $style_data | append ( resources.Get . | toCSS ) -}}
    {{- end -}}
{{- end -}}

{{- $path := $style_data | resources.Concat $style_dest | minify  -}}
{{- with $path -}}
<link id="styles" rel="preload" href="{{ .RelPermalink }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ .RelPermalink }}"></noscript>
{{- end -}}




<!-- script -->
{{- $script_data := slice -}}
{{- $script_dest := .Store.Get "dest_jsx" -}}
{{- $script_opts := dict "minify" (not hugo.IsDevelopment) "sourceMap" (cond hugo.IsDevelopment "external" "") "targetPath" $script_dest -}}

{{- range ( sort ( .Store.Get "pack_jsx" ) | uniq ) -}}
    {{- if resources.Get . -}}
        {{- $script_data = $script_data | append ( resources.Get . ) -}}
    {{- end -}}
{{- end -}}

{{- $path := $script_data | resources.Concat $script_dest | minify  -}}
{{- with $path | js.Build $script_opts -}}<script id="script" src="{{ .RelPermalink }}" crossorigin="anonymous" defer></script>{{- end -}}

